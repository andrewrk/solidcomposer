{% extends 'arena/arena_base.html' %}

{% block title %}{{ competition.title }} - {{ block.super }}{% endblock %}

{% block extra_header %}
    {{ block.super }}
    <script type="text/javascript" src="{{ MEDIA_URL }}js/webtoolkit.aim.js"></script>
    <script type="text/javascript">
var competition_id = {{ competition.id }};
var chatroom_id = {% if competition.chat_room %}{{ competition.chat_room.id }}{% else %}null{% endif %};
    </script>
    <script type="text/javascript" src="{{ MEDIA_URL }}js/formatting.js"></script>
    <script type="text/javascript" src="{{ MEDIA_URL }}js/pre/login.js"></script>
    <script type="text/javascript" src="{{ MEDIA_URL }}js/pre/chat.js"></script>
    <script type="text/javascript" src="{{ MEDIA_URL }}js/pre/competition.js"></script>
{% endblock %}

{% block content %}
    {% include 'login_div.html' %}
    <h1>Arena</h1>
    <p>Back to <a href="/arena/">Arena</a></p>
    <h2>{{ competition.title }}</h2>
    <div id="status">
        {% include 'loading.html' %}
    </div>
    <div id="info">
        {% include 'loading.html' %}
    </div>
    <div id="vote-status">
        {% include 'loading.html' %}
    </div>
    <div id="entry-area">
        {% include 'loading.html' %}
    </div>
    {% include 'chat/chatroom.html' %}
    <div style="display: none;" id="submission">
        <h4>Your entry</h4>
        <div id="submit-entry">
            <form method="post" enctype="multipart/form-data" action="/arena/ajax/submit-entry/" onsubmit="return AIM.submit(this, {'onStart': submitEntryStartCallback, 'onComplete': submitEntryCompleteCallback})">
                <input type="hidden" name="compo" value="{{ competition.id }}" />
                Your rendered song, in mp3 format: <input type="file" name="entry-file-mp3" id="entry-file-mp3" /><br/>
                (optional) Source project file: <input type="file" name="entry-file-source" id="entry-file-source" /><br/>
                Song Title: <input type="text" id="entry-title" name="entry-title" value="" maxlength="100" /><br/>
                (optional) Author's Comments:
                <textarea name="entry-comments" id="entry-comments"></textarea>
                <br />
                <input type="submit" value="submit" />
            </form>
        </div>
    </div>
    <div id="current-entry">
        {% include 'loading.html' %}
    </div>
{% endblock %}

